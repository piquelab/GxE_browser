<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>GxE Browser</title>

    <!-- Bootstrap & other CSS-->
    <link type="text/css" rel="stylesheet"
      href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css"/>
    <link type="text/css" rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="//igv.org/web/beta/igv-beta.css">
    <link type="text/css" href="css/bootstrap.min.css" rel="stylesheet">
    <link type="text/css" href="css/gxebrowser.css" rel="stylesheet">

    <!-- js libraries & scripts -->
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/handlebars-v3.0.3.js"></script>
    <script type="text/javascript" src="js/trackData.js"></script>
    <script type="text/javascript" src="js/sequencing.js"></script>

    <!-- Font libraries -->
    <link rel="stylesheet" type="text/css" href='//fonts.googleapis.com/css?family=PT+Sans:400,700'> 
    <link rel="stylesheet" type="text/css" href='//fonts.googleapis.com/css?family=Open+Sans'>

    <!-- Core IGV JS Library-->
    <script type="text/javascript" src="//igv.org/web/beta/igv-beta.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <!-- Add a navbar -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">gxebrowser</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Gene Expression <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="network.html">Network Analysis</a></li>
                <li><a href="deg.html">Differential Gene Expression</a></li>
                <li><a href="wig.html">Sequencing Data (Wig tracks)</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Allele-Specific Expression <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="ase_tables.html">Data Tables</a></li>
                <li><a href="ase_forest.html">Forest Plots</a></li>
                <li><a href="iase_plots.html">iASE Plots</a></li>
              </ul>
            </li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>

    <!-- Breadcrumbs -->
    <ol class="breadcrumb" aria-label="breadcrumbs">
      <li role="menuitem"><a href="index.html">Home</a></li>
      <li role="menuitem"><a href="#">Gene Expression</a></li>
      <li role="menuitem" class="active">Sequencing Tracks</li>
    </ol>

    <!-- Page Content -->
    <div class="container" style="display: table-cell">
      <h1>GxE Browser</h1>

      <div class="row">
        <div class="col-md-3">
          <!-- Trigger the add track modal -->
          <button type="button" style="margin: 5px;" class="btn btn-info btn-sm" data-toggle="modal" data-target="#trackModal">Add Tracks</button>
          <!-- Allow user to remove all tracks currently on the browser -->
          <button type="button" style="margin: 5px;" class="btn btn-warning btn-sm" id="js-rm-tracks">Remove Tracks</button>
        </div> <!-- end controls -->
        <div class="col-md-9">
          <p class="help">Select "Add Tracks" to add sequencing data to the browser. "Remove tracks" will clear all tracks currently displayed. To change regions, either 1) click and drag left or right anywhere in the browser, 2) enter coordinates in the upper left search bar (chr:start-end), or 3) enter a gene symbol in the search bar.</p>
        </div> 
      </div> <!-- end row -->
    </div> <!-- end container -->

    <hr />

    <div class="container">
      <div id="igvDiv">
      </div>
    </div>

    <!-- Use a bootstrap modal to show/hide the track controls -->
    <div id="trackModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Select Tracks To Add</h4>
            <p class="note">Hold 'control' to select multiple treatments. Switching tabs does not reset your selections.</p>
          </div>
          <div class="modal-body">
            <ul class="nav nav-tabs" id="select-nav">
              <!-- fill content using template -->
            </ul>
            <div class="tab-content" style="border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;" id="content">
              <!-- fill content using template -->
            </div> <!-- /tab-content container -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary btn-danger" data-dismiss="modal">Cancel</button>
            <button id="js-add-tracks" class="btn btn-success">Add Tracks!</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Template for tabs -->
    <script id="tabs-template" type="text/x-handlebars-template">
      {{#each celltypes}}
        {{#if @first}}
          <li class="active"><a data-toggle="tab" href="#{{name}}" id="ct-{{name}}">{{name}}</a></li>
        {{else}}
          <li><a data-toggle="tab" href="#{{name}}" id="ct-{{name}}">{{name}}</a></li>
        {{/if}}
      {{/each}}
    </script>

    <!-- Template for menu -->
    <script id="select-template" type="text/x-handlebars-template">
      {{#each celltypes}}
        <!-- set the first tab as active -->
        {{#if @first}}
          <div class="tab-pane active" id="{{name}}">
        {{else}}
          <div class="tab-pane fade" id="{{name}}">
        {{/if}}
          <p class="note">&nbsp;</p>
          <select multiple class="track-select form-control" style="margin-bottom:10px">
            {{#each treatments}}
              <!-- use @../index to get parent index -->
              <option class="select_treatment" data-ct={{@../index}} data-tx={{@index}}>{{name}}</option>
            {{/each}}
          </select>
        </div>
        {{/each}}
        <p class="note">Note: Each cell type has three individuals. All tracks will be added by default, but you can remove them using the browser controls to the right of each track.</p>
    </script>

  </body>
</html>
